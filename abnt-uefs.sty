%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Template de TCC baseado nas normas da ABNT voltado para alunos da UEFS
%% Versão: 1.1
%% Desenvolvimento: Danilo de Oliveira Gonçalves
%% Adaptação final: João Carlos Nunes Bittencourt
%% Data: 31/03/2011
%% Obs.: Este arquivo contém as modificações necessárias para adequação aos
%%       padrões adotados pelo curso de Engenharia de Computação da UEFS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\NeedsTeXFormat{LaTeX2e}

\RequirePackage{ifthen}
\RequirePackage{lastpage}
\RequirePackage{perpage}

\PassOptionsToClass{pagestart=firstchapter,chapter=TITLE,section=TITLE,tocpage=prefix,floatnumber=continuous}{abnt}

\makeatletter

\newcommand{\esporient}[2]{
	\leftskip 0em
	\@tempdima 5.5em
	\advance\leftskip \@tempdima \null\nobreak\hskip -\leftskip
	{#1#2\hfil}}

\newcommand{\espcoorient}[2]{
	\leftskip 0em
	\@tempdima 7em
	\advance\leftskip \@tempdima \null\nobreak\hskip -\leftskip
	{#1#2\hfil}}

\renewcommand{\folhaderosto}{
  \begin{titlepage}
    \espaco{1.1}

    \begin{center}
	\large\ABNTchapterfont\ABNTautordata
    \end{center}

    \vspace{7.5cm}

    \begin{center}
	\large\ABNTchapterfont\ABNTtitulodata\par
    \end{center}

    \vspace{2cm}

    \hspace{.35\textwidth}
    \begin{minipage}{.5\textwidth}
	\begin{espacosimples}
		\ABNTcomentariodata\par
	\end{espacosimples}
    \end{minipage}

\hspace{.35\textwidth}
\begin{minipage}{.5\textwidth}
	\begin{espacosimples}
		\esporient{\numberline {Orientador:}}{\ignorespaces\ABNTorientadordata}
	\end{espacosimples}
\end{minipage}

\ABNTifnotempty{\ABNTcoorientadordata}{
	\hspace{.35\textwidth}
	\begin{minipage}{.5\textwidth}
		\begin{espacosimples}
			\espcoorient{\numberline {Co-Orientador:}}{\ignorespaces\ABNTcoorientadordata}
		\end{espacosimples}
	\end{minipage}}

\vfill

\begin{center}
	\textbf{\ABNTlocaldata}\par
	\textbf{\ABNTdatadata}
\end{center}

\end{titlepage}
}% end of \folhaderosto

% Defining how is typeset the \chapter
\def\@makechapterhead#1{%
  {%
  \noindent
  \textbf{\thechapter\hspace{2ex}\MakeUppercase{#1}}
  \par
  }%
  \vspace{5.0em}
}

% Defining how is typeset the \chapter*
\def\@makeschapterhead#1{%
  {%
  \centering
  \textbf{\MakeUppercase{#1}}
  \par
  }%
  \vspace{\baselineskip}
}

%teste com o tamanho dos titulos

\renewcommand\section{\ABNTstartsection{section}{2}{\z@}%
                           {-3.0ex \@plus -0ex \@minus -0.0ex}%
                           {2.0ex \@plus .0ex}%
                           {\espaco{duplo}\bfseries%
                            \ABNTsectionfont\normalsize}}
\renewcommand\subsection{\ABNTstartsection{subsection}{3}{\z@}%
                           {-3.0ex\@plus -0ex \@minus -.0ex}%
                           {2.0ex \@plus .0ex}%
                           {\espaco{duplo}\normalfont%
                            \ABNTsectionfont\normalsize}}
\renewcommand\subsubsection{\ABNTstartsection{subsubsection}{4}{\z@}%
                           {-3.0ex\@plus -0ex \@minus -.0ex}%
                           {2.0ex \@plus .0ex}%
                           {\espaco{duplo}\normalfont%
                            \ABNTsectionfont\normalsize}}

%termino do teste dos tamanhos

% Altera o tamanho das fontes dos cap?tulos e dos ap?ndices
\renewcommand{\ABNTchapterfont}{\bfseries}
\renewcommand{\ABNTchaptersize}{\normalsize} %era Large / normalsize
\renewcommand{\ABNTanapsize}{\normalsize}%era Large / normalsize


% Novo...
\renewcommand{\ABNTsectionfont}{\bfseries}
\renewcommand{\ABNTsectionfontsize}{\normalsize}
\renewcommand{\ABNTsubsectionfont}{\normalfont}
\renewcommand{\ABNTsubsectionfontsize}{\normalsize}
\renewcommand{\ABNTsubsubsectionfont}{\normalfont}
\renewcommand{\ABNTsubsubsectionfontsize}{\normalsize}

% Ajuste de tabulação
\setlength{\parindent}{1.25cm}
\setlength{\parskip}{0.0cm}

\setboolean{ABNTcapchap}{true} % deixou os títulos das seções em maiúsculo
\setboolean{ABNTCapAnnexAppendix}{true} %nao tinha essa linha
\setboolean{ABNTpagenumstyle}{false} %nao tinha essa linha

% MUDA OS CAPÍTULOS PARA FICAREM EM MAIÚSCULO NO SUMÁRIO
\let \oldchap=\chapter{}
\renewcommand*{\chapter}{%
\secdef{\Chap}{\ChapS}%
}
\newcommand\ChapS[1]{\oldchap*{\MakeUppercase{#1}}}
\newcommand\Chap[2][]{\oldchap[\MakeUppercase{#1}]{\MakeUppercase{#2}\vspace{-3.5em}}}

% MUDA AS SEÇÕES PARA FICAREM EM MAIÚSCULO NO SUMÁRIO
\let \oldsect=\section{}
\renewcommand*{\section}{%
\secdef{\Sect}{\SectS}%
}
\newcommand\SectS[1]{\oldsect*{\MakeUppercase{#1}}}
\newcommand\Sect[2][]{\oldsect[\MakeUppercase{#1}]{\MakeUppercase{#2}}}

% MUDA AS SUBSEÇÕES PARA FICAREM EM MAIÚSCULO NO SUMÁRIO
\let \oldsubsect=\subsection{}
\renewcommand*{\subsection}{%
\secdef{\SubSect}{\SubSectS}%
}
\newcommand\SubSectS[1]{\oldsubsect*{\MakeUppercase{#1}}}
\newcommand\SubSect[2][]{\oldsubsect[\MakeUppercase{#1}]{\MakeUppercase{#2}}}

% MUDA AS SUBSUBSEÇÕES PARA FICAREM EM MAIÚSCULO NO SUMÁRIO
\let \oldsubsubsect=\subsubsection{}
\renewcommand*{\subsubsection}{%
\secdef{\SubSubSect}{\SubSubSectS}%
}
\newcommand\SubSubSectS[1]{\oldsubsubsect*{\MakeUppercase{#1}}}
\newcommand\SubSubSect[2][]{\oldsubsubsect[\MakeUppercase{#1}]{\MakeUppercase{#2}}}

%Altera o espa?amento entre dots
\renewcommand\@dotsep{2}

%Altera forma de montagem do table of contents
\renewcommand\l@chapter[2]{
  \ifnum \c@tocdepth >\m@ne
    \addpenalty{-\@highpenalty}%
    \vskip 1.0em \@plus\p@
    \setlength\@tempdima{1.5em}%
    \begingroup
      \ifthenelse{\boolean{ABNTpagenumstyle}}
        {\renewcommand{\@pnumwidth}{3.5em}}%alterei aqui pra testar de 3.5
        {}
      \parindent \z@ \rightskip \@pnumwidth
      \parfillskip -\@pnumwidth
      \leavevmode \normalsize\ABNTtocchapterfont
      \advance\leftskip\@tempdima
      \hskip -\leftskip
      #1\nobreak\dotfill \nobreak%
      \ifthenelse{\boolean{ABNTpagenumstyle}}
         {%
          \hb@xt@\@pnumwidth{\hss
            \ifthenelse{\not\equal{#2}{}}{{\normalfont \thinspace#2}}{}}\par
         }
         {%
          \hb@xt@\@pnumwidth{\hss #2}\par
         }
      \penalty\@highpenalty
    \endgroup
  \fi}

\renewcommand*\l@section{\@dottedtocline{1}{0em}{2.3em}}
\renewcommand*\l@subsection{\@dottedtocline{2}{0em}{3.2em}}
\renewcommand*\l@subsubsection{\@dottedtocline{3}{0em}{4.1em}}

% Cria um comando auxiliar para montagem da lista de figuras
\newcommand{\figfillnum}[1]{%
  {\hspace{0.3em}\normalfont\dotfill}\nobreak % era \hspace{1em}
  \hb@xt@\@pnumwidth{\hfil\normalfont #1}{}\par}

% Cria um comando auxiliar para montagem da lista de tabelas
\newcommand{\tabfillnum}[1]{%
	{\hspace{0.3em}\normalfont\dotfill}\nobreak % era \hspace{1em}
	\hb@xt@\@pnumwidth{\hfil\normalfont #1}{}\par}

% Altera a forma de montagem da lista de figuras
\renewcommand*{\l@figure}[2]{
	\leftskip 3.1em
	\rightskip 1.6em
	\parfillskip -\rightskip
	\parindent 0em
	\@tempdima 2.0em
	\advance\leftskip \@tempdima \null\nobreak\hskip -\leftskip
	{Figura \normalfont #1}\nobreak \figfillnum{#2}}

% Altera a forma de montagem de lista de tabelas
\renewcommand*{\l@table}[2]{
	\leftskip 3.4em
	\rightskip 1.6em
	\parfillskip -\rightskip
	\parindent 0em
	\@tempdima 2.0em
	\advance\leftskip \@tempdima \null\nobreak\hskip -\leftskip
	{Tabela \normalfont #1}\nobreak \tabfillnum{#2}}

% Define os comandos que montam a lista de s?mbolos
\newcommand{\listadesimbolos}{\pretextualchapter{Lista de S?mbolos}\@starttoc{lsb}}
\newcommand{\simbolo}[2]{{\addcontentsline{lsb}{simbolo}{\numberline{#1}{#2}}}#1}
\newcommand{\l@simbolo}[2]{
	\vspace{-0.75cm}
	\leftskip 0em
	\parindent 0em
	\@tempdima 5em
	\advance\leftskip \@tempdima \null\nobreak\hskip -\leftskip
	{\normalfont #1}\hfil\nobreak\par}

% Define o comando que monta a lista de siglas
\newcommand{\listadesiglas}{\pretextualchapter{Lista de Siglas}\@starttoc{lsg}}
\newcommand{\sigla}[2]{{\addcontentsline{lsg}{sigla}{\numberline{#1}{#2}}}#1}
\newcommand{\l@sigla}[2]{
	\vspace{-0.75cm}
	\leftskip 0em
	\parindent 0em
	\@tempdima 5em
	\advance\leftskip \@tempdima \null\nobreak\hskip -\leftskip
	{\normalfont #1}\hfil\nobreak\par}

\newcommand{\SPACE}{\rule{0in}{3ex}} %% espaçamento entre linhas das tabelas

\let\orig@Description =\description
\def\Nospacing{\itemsep=1pt\topsep=0pt\partopsep=0pt%
\parskip=0pt\parsep=0pt}

\renewenvironment{description}{\orig@Description\Nospacing}{\endlist}

\let\orig@Itemize =\itemize
\def\Nospacing{\itemsep=1pt\topsep=0pt\partopsep=0pt%
\parskip=0pt\parsep=0pt}

\renewenvironment{itemize}{\orig@Itemize\Nospacing}{\endlist}

\let\orig@Enumerate =\enumerate
\def\Nospacing{\itemsep=1pt\topsep=0pt\partopsep=0pt%
\parskip=0pt\parsep=0pt}

\renewenvironment{enumerate}{\orig@Enumerate\Nospacing}{\endlist}

\makeatother



%Hifenização (adicionar até caber sem separar palavras) %Isso faz com que o Latex não separe sílabas.
\hyphenpenalty=10000   \exhyphenpenalty=10000
\sloppy


\setcounter{secnumdepth}{5}
\pagenumbering{arabic}
\setcounter{tocdepth}{5}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% REFERENCIAS 

\renewcommand{\ABNTbibliographyname}{REFER\^ENCIAS}

